/**
 * rubico v2.6.0
 * https://github.com/a-synchronous/rubico
 * (c) 2019-2024 Richard Tong
 * rubico may be freely distributed under the MIT license.
 */

!function(n,t){"object"==typeof module?module.exports=t:"function"==typeof define?define((()=>t)):n.trace=t}("object"==typeof globalThis?globalThis:this,function(){"use strict";const n=n=>null!=n&&"function"==typeof n.then,t=n=>function(){return n},o=(n,t,o)=>n?t():o(),r=Symbol.for("placeholder"),e=Promise.all.bind(Promise),u=function(o,r){const e=o[0],u=r(...o);return n(u)?u.then(t(e)):e},c=function(...t){const o=t.pop();return 0==t.length?(c=u,i=o,(f=r)==r?((n,t)=>function(...o){return n(o,t)})(c,i):((n,t)=>function(...o){return n(t,o)})(c,f)):function(t){const o=t.length;let r=-1;for(;++r<o;){const o=t[r];if(n(o))return!0}return!1}(t)?e(t).then(function(n,t,o){return t==r?((n,t)=>function(o){return n(o,t)})(n,o):((n,t)=>function(o){return n(t,o)})(n,t)}(u,r,o)):u(t,o);var c,f,i};c.if=(e,u)=>function(...f){const i=e(...f);if(n(i))return i.then((s=o,l=r,h=((n,t)=>function(){return n(...t)})(c(u),f),p=t(f[0]),l==r?((n,t,o)=>function(r){return n(r,t,o)})(s,h,p):h==r?((n,t,o)=>function(r){return n(t,r,o)})(s,l,p):((n,t,o)=>function(r){return n(t,o,r)})(s,l,h)));var s,l,h,p;if(i){const o=u(...f);if(n(o))return o.then(t(f[0]))}return f[0]};const f=console.log;return function(...t){const o=t[0];return"function"==typeof o?c((r=o,e=f,function(...t){const o=r(...t);return n(o)?o.then(e):e(o)})):c(f)(...t);var r,e}}());
