/**
 * rubico v2.6.0
 * https://github.com/a-synchronous/rubico
 * (c) 2019-2024 Richard Tong
 * rubico may be freely distributed under the MIT license.
 */

!function(n,t){"object"==typeof module?module.exports=t:"function"==typeof define?define((()=>t)):n.tap=t}("object"==typeof globalThis?globalThis:this,function(){"use strict";const n=n=>null!=n&&"function"==typeof n.then,t=n=>function(){return n},r=(n,t,r)=>n?t():r(),e=Symbol.for("placeholder"),o=Promise.all.bind(Promise),u=function(r,e){const o=r[0],u=e(...r);return n(u)?u.then(t(o)):o},i=function(...t){const r=t.pop();return 0==t.length?(i=u,c=r,(f=e)==e?((n,t)=>function(...r){return n(r,t)})(i,c):((n,t)=>function(...r){return n(t,r)})(i,f)):function(t){const r=t.length;let e=-1;for(;++e<r;){const r=t[e];if(n(r))return!0}return!1}(t)?o(t).then(function(n,t,r){return t==e?((n,t)=>function(r){return n(r,t)})(n,r):((n,t)=>function(r){return n(t,r)})(n,t)}(u,e,r)):u(t,r);var i,f,c};return i.if=(o,u)=>function(...f){const c=o(...f);if(n(c))return c.then((l=r,s=e,h=((n,t)=>function(){return n(...t)})(i(u),f),p=t(f[0]),s==e?((n,t,r)=>function(e){return n(e,t,r)})(l,h,p):h==e?((n,t,r)=>function(e){return n(t,e,r)})(l,s,p):((n,t,r)=>function(e){return n(t,r,e)})(l,s,h)));var l,s,h,p;if(c){const r=u(...f);if(n(r))return r.then(t(f[0]))}return f[0]},i}());
