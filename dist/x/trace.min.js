/**
 * rubico v2.6.1
 * https://github.com/a-synchronous/rubico
 * (c) 2019-2024 Richard Tong
 * rubico may be freely distributed under the MIT license.
 */

!function(n,t){"object"==typeof module?module.exports=t:"function"==typeof define?define((()=>t)):n.trace=t}("object"==typeof globalThis?globalThis:this,function(){"use strict";const n=n=>null!=n&&"function"==typeof n.then,t=n=>function(){return n},r=(n,t,r)=>n?t():r(),e=Symbol.for("placeholder"),o=function(n,t,r,o){return t==e?((n,t,r)=>function(e){return n(e,t,r)})(n,r,o):r==e?((n,t,r)=>function(e){return n(t,e,r)})(n,t,o):((n,t,r)=>function(e){return n(t,r,e)})(n,t,r)},u=function(t){const r=t.length;let e=-1;for(;++e<r;){const r=t[e];if(n(r))return!0}return!1},c=Promise.all.bind(Promise),i=function(r,e){const o=r[0],u=e(...r);return n(u)?u.then(t(o)):o},f=function(...n){const t=n.pop();return 0==n.length?(r=i,f=t,(o=e)==e?((n,t)=>function(...r){return n(r,t)})(r,f):((n,t)=>function(...r){return n(t,r)})(r,o)):u(n)?c(n).then(function(n,t,r){return t==e?((n,t)=>function(r){return n(r,t)})(n,r):((n,t)=>function(r){return n(t,r)})(n,t)}(i,e,t)):i(n,t);var r,o,f},l=function(u,c,i){const l=u(...i);if(n(l))return l.then(o(r,e,((n,t)=>function(){return n(...t)})(f(c),i),t(i[0])));if(l){const r=c(...i);if(n(r))return r.then(t(i[0]))}return i[0]};f.if=function(...n){if(2==n.length)return t=l,r=n[0],i=n[1],f=e,r==e?((n,t,r)=>function(...e){return n(e,t,r)})(t,i,f):i==e?((n,t,r)=>function(...e){return n(t,e,r)})(t,r,f):((n,t,r)=>function(...e){return n(t,r,e)})(t,r,i);var t,r,i,f;const s=n.length,h=n[s-1],p=n[s-2],a=n.slice(0,-2);return u(a)?c(a).then(o(l,p,h,e)):l(p,h,n)};const s=console.log;return function(...t){const r=t[0];return"function"==typeof r?f((e=r,o=s,function(...t){const r=e(...t);return n(r)?r.then(o):o(r)})):f(s)(...t);var e,o}}());
