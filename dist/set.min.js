/**
 * rubico v1.9.2
 * https://github.com/a-synchronous/rubico
 * (c) 2019-2021 Richard Tong
 * rubico may be freely distributed under the MIT license.
 */

!function(t,n){"object"==typeof module?module.exports=n:"function"==typeof define?define((()=>n)):t.set=n}("object"==typeof globalThis?globalThis:this,function(){"use strict";const t=Array.isArray,n=/[.|[|\]]+/,e=function(t,n){const e=new Map,o=function(o){if(e.has(o))return e.get(o);const r=t(o);return e.set(o,r),e.size>n&&e.clear(),r};return o.cache=e,o}((function(t){const e=t.length-1,o="["==t[0],r="]"==t[e];return o&&r?t.slice(1,e).split(n):o?t.slice(1).split(n):r?t.slice(0,e).split(n):t.split(n)}),500),o=function(n,o,r){if(!(t=>{if(null==t)return!1;const n=typeof t;return"object"==n||"function"==n})(n))return n;const i=(n=>t(n)?n:"string"==typeof n?e(n):[n])(r),c=i.length,u=c-1,f={...n};let s=f,l=-1;for(;++l<c;){const n=i[l];if(l==u)s[n]=o;else{const e=s[n],o=t(e)?e.slice():{...e};s[n]=o,s=o}}return f},r=Symbol.for("placeholder");return(t,n)=>function(e){if("function"==typeof n){const s=n(e);return(t=>null!=t&&"function"==typeof t.then)(s)?s.then((i=o,u=r,f=t,(c=e)==r?((t,n,e)=>function(o){return t(o,n,e)})(i,u,f):u==r?((t,n,e)=>function(o){return t(n,o,e)})(i,c,f):((t,n,e)=>function(o){return t(n,e,o)})(i,c,u))):o(e,s,t)}var i,c,u,f;return o(e,n,t)}}());
